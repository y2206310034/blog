webpackJsonp([2],{"+iMY":function(e,t){},jK0A:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),s=n.n(a),c={data:function(){return{dataList:[],count:8,centenceCount:0,currPage:1,show:!1,NoFirst:!1,centence:{author:"",content:""},isUpdate:!1}},computed:{pageCount:function(){return Math.ceil(this.centenceCount/this.count)}},methods:{getCentence:function(){var e=this;this.axios.get("/getManyCentence",{params:{page:this.currPage-1,count:this.count}}).then(function(t){var n=t.data.data;n.forEach(function(t,n){t.saveTime=e.updateTime(t.saveTime),t.index=n}),e.dataList=n})},handleUpdate:function(e){this.isUpdate=!0,this.show=!0,this.centence=JSON.parse(s()(this.dataList[e]))},deleteCentence:function(e){var t=this;this.axios.get("/deleteCentenceById",{params:{centenceId:this.dataList[e].centenceId}}).then(function(e){"1"==e.data.status&&(t.centenceCount--,t.currPage>t.pageCount&&(t.currPage=t.pageCount),t.$message({message:"删除成功",type:"success"}),t.getCentence())})},updateTime:function(e){var t=new Date(e);return t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日"+t.getHours()+"时"+t.getMinutes()+"分"},getCentenceCount:function(){var e=this;this.axios.get("/getCentenceCount").then(function(t){e.centenceCount=t.data.data.count})},updateCentence:function(){var e=this;console.log(this.centence),this.axios.post("/updateCentence",this.$qs.stringify(this.centence)).then(function(t){e.$message({message:"发表成功",type:"success"}),e.show=!1,e.isUpdate=!1,e.getCentence(),e.clearUploadArea()})},uploadCentence:function(){var e=this;console.log(this.centence),this.axios.post("/uploadCentence",this.$qs.stringify(this.centence)).then(function(t){e.$message({type:"success",message:"上传成功!"}),e.show=!1,e.centenceCount++,e.getCentence(),e.clearUploadArea()})},handleTurnPage:function(e){this.currPage=e,this.getCentence()},handleUpload:function(){var e=this;this.centence.author&&this.centence.content?this.$confirm("是否确认上传?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.isUpdate?(console.log("a"),e.updateCentence()):e.uploadCentence()}).catch(function(){e.$message({type:"info",message:"已取消上传"})}):this.$message({message:"不能为空，请输入内容在次提交",type:"warning"})},showUpload:function(){this.NoFirst=!0,this.show?(this.show=!1,this.clearUploadArea()):this.show=!0},clearUploadArea:function(){this.centence={author:"",content:""}},exit:function(){this.show=!1,this.clearUploadArea()}},mounted:function(){this.getCentenceCount(),this.getCentence()}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"centence"},[n("div",{staticClass:"uploadCentence",on:{click:e.showUpload}},[n("button",[e._v("上传新句子")])]),e._v(" "),n("div",{staticClass:"showArea"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:""}},[n("el-table-column",{attrs:{prop:"centenceId",label:"id号",width:"60"}}),e._v(" "),n("el-table-column",{attrs:{prop:"saveTime",label:"日期",width:"190"}}),e._v(" "),n("el-table-column",{attrs:{prop:"author",label:"作者",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"content",label:"内容"}}),e._v(" "),n("el-table-column",{staticClass:"operator",attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-edit",on:{click:function(n){return e.handleUpdate(t.row.index)}}}),e._v(" "),n("i",{staticClass:"el-icon-delete",on:{click:function(n){return e.deleteCentence(t.row.index)}}})]}}])})],1),e._v(" "),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:10*e.pageCount},on:{"current-change":e.handleTurnPage}})],1),e._v(" "),n("div",{staticClass:"uploadArea",class:{show:e.show,hidden:e.NoFirst&&!e.show}},[n("div",[n("el-row",[n("label",{attrs:{for:""}},[e._v("作者名:")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.centence.author,expression:"centence.author"}],attrs:{type:"text"},domProps:{value:e.centence.author},on:{input:function(t){t.target.composing||e.$set(e.centence,"author",t.target.value)}}})]),e._v(" "),n("el-row",{staticClass:"content"},[n("label",{attrs:{for:""}},[e._v("内容:")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.centence.content,expression:"centence.content"}],attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:e.centence.content},on:{input:function(t){t.target.composing||e.$set(e.centence,"content",t.target.value)}}})]),e._v(" "),n("el-row",{staticClass:"btn"},[n("button",{on:{click:e.handleUpload}},[e._v("提交")])]),e._v(" "),n("button",{staticClass:"exit",on:{click:e.exit}},[e._v("X")])],1)])])},staticRenderFns:[]};var i=n("VU/8")(c,o,!1,function(e){n("+iMY")},null,null);t.default=i.exports},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(e,t,n){var a=n("FeBl"),s=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}}});