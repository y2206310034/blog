webpackJsonp([5],{"4A+0":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{bgColor:["#8B008B","#191970","#6495ED","#8B6508","#CD2990","#B23AEE","\t\t#FFD700","#636363"],pageCount:0,tableData:[],count:8,articleCount:0,currPage:1,loading:!0}},methods:{randomBg:function(){var t=Math.floor(8*Math.random());return this.bgColor[t]},getArticleCount:function(){var t=this;this.axios.get("/getArticleCount").then(function(e){t.articleCount=e.data.data.count,t.pageCount=Math.ceil(e.data.data.count/t.count)})},handleTurnPage:function(t){this.currPage=t,this.getArticle()},updateTime:function(t){var e=new Date(t);return e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日"+e.getHours()+"时"+e.getMinutes()+"分"},getArticle:function(){var t=this;this.loading=!0,this.axios.get("/getArticleAdmin",{params:{page:this.currPage-1,count:this.count}}).then(function(e){e.data.data.forEach(function(e){e.date=t.updateTime(e.date)}),t.tableData=e.data.data,t.loading=!1})},updateArticle:function(t){this.$router.push({name:"articlePublish",query:{articleId:t}})},deleteArticle:function(t){var e=this;this.axios.get("/deleteArticleById",{params:{articleId:t}}).then(function(t){"1"==t.data.status&&(e.articleCount--,e.pageCount=Math.ceil(e.articleCount/e.count),e.currPage>e.pageCount&&(e.currPage=e.pageCount),e.$message({message:"删除成功",type:"success"}),e.getArticle())})}},mounted:function(){this.getArticleCount(),this.getArticle()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"published"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"articleId",label:"ID",width:"60px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"category",label:"分类",width:"80px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"imgName",label:"首页图片文件名",width:"160px"}}),t._v(" "),a("el-table-column",{attrs:{label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t._l(e.row.tags,function(e){return a("span",{key:e},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},t._l(e.row.tags,function(e,n){return a("span",{key:n,staticClass:"tag",style:{background:t.randomBg()}},[t._v(t._s(e)+" ")])}),0)],2)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"viewNum",label:"浏览",width:"60px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"commentNum",label:"评论",width:"60px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"发表时间"}}),t._v(" "),a("el-table-column",{staticClass:"operator",attrs:{label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-edit",on:{click:function(a){return t.updateArticle(e.row.articleId)}}}),t._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(a){return t.deleteArticle(e.row.articleId)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:10*t.pageCount},on:{"current-change":t.handleTurnPage}})],1)},staticRenderFns:[]};var l=a("VU/8")(n,r,!1,function(t){a("A8/1")},null,null);e.default=l.exports},"A8/1":function(t,e){}});