webpackJsonp([7],{"J/Bp":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{imgList:[],fileList:[],headers:{Authorization:"Bearer "+window.localStorage.getItem("pastlove_jwt_token")+"    "}}},methods:{submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){var s=this;100===e.percentage&&this.axios.get("/deleteSingleImg",{params:{imgPath:e.response.data.name}}).then(function(t){if("1"===t.data.status){s.$message({message:"删除成功",type:"success"});var a=s.imgList.indexOf(e.response.data.name);s.imgList.splice(a,1)}})},handleSuccess:function(e,t,s){console.log(e),this.imgList.push(e.data.name),this.$message({message:"上传成功",type:"success"})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"upload-pic"},[s("el-row",{staticClass:"upload"},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"'http://www.pastlove.net/admin'","on-remove":e.handleRemove,"on-success":e.handleSuccess,"file-list":e.fileList,"auto-upload":!1,headers:e.headers}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),s("el-row",{staticClass:"pic-names"},[s("h2",[e._v("存放图片时文件名分别为:")]),e._v(" "),s("ul",{staticClass:"img-name-container"},e._l(e.imgList,function(t){return s("li",{key:t.uid},[e._v(e._s(t.slice(1)))])}),0)])],1)},staticRenderFns:[]};var l=s("VU/8")(a,i,!1,function(e){s("K/qO")},null,null);t.default=l.exports},"K/qO":function(e,t){}});